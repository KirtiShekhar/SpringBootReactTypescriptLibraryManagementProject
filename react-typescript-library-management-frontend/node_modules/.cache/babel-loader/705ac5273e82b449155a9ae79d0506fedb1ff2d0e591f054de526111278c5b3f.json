{"ast":null,"code":"import axios from \"axios\";\nimport { sessionHistory } from \"../commons/history\";\nimport authenticationService from \"./authentication.service\";\nexport const AuthHeader = () => {\n  const currentSignInUser = authenticationService.getCurrentUser();\n  return {\n    \"Content-Type\": \"application/json\",\n    Authorization: `Bearer ${currentSignInUser === null || currentSignInUser === void 0 ? void 0 : currentSignInUser.jwtAccessToken}`\n  };\n};\n_c = AuthHeader;\nexport function handleResponseWithLoginCheck() {\n  axios.interceptors.response.use(response => response, error => {\n    var _error$response;\n    const currentUser = authenticationService.getCurrentUser();\n    const isSignedIn = currentUser === null || currentUser === void 0 ? void 0 : currentUser.jwtAccessToken;\n    const status = error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status;\n    if (isSignedIn && [401, 403].includes(status)) {\n      authenticationService.clearCurrentUser();\n      sessionHistory.push(\"/login\");\n    }\n    return Promise.reject(error);\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"AuthHeader\");","map":{"version":3,"names":["axios","sessionHistory","authenticationService","AuthHeader","currentSignInUser","getCurrentUser","Authorization","jwtAccessToken","handleResponseWithLoginCheck","interceptors","response","use","error","currentUser","isSignedIn","status","includes","clearCurrentUser","push","Promise","reject"],"sources":["D:/ReactProjects/react-typescript-library-management/src/services/base.service.ts"],"sourcesContent":["import axios from \"axios\";\r\nimport { sessionHistory } from \"../commons/history\";\r\nimport authenticationService from \"./authentication.service\";\r\n\r\nexport const AuthHeader = () => {\r\n  const currentSignInUser = authenticationService.getCurrentUser();\r\n\r\n  return {\r\n    \"Content-Type\": \"application/json\",\r\n    Authorization: `Bearer ${currentSignInUser?.jwtAccessToken}`,\r\n  };\r\n};\r\n\r\nexport function handleResponseWithLoginCheck() {\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n      const currentUser = authenticationService.getCurrentUser();\r\n      const isSignedIn = currentUser?.jwtAccessToken;\r\n      const status = error?.response?.status;\r\n\r\n      if (isSignedIn && [401, 403].includes(status)) {\r\n        authenticationService.clearCurrentUser();\r\n        sessionHistory.push(\"/login\");\r\n      }\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,oBAAoB;AACnD,OAAOC,qBAAqB,MAAM,0BAA0B;AAE5D,OAAO,MAAMC,UAAU,GAAG,MAAM;EAC9B,MAAMC,iBAAiB,GAAGF,qBAAqB,CAACG,cAAc,EAAE;EAEhE,OAAO;IACL,cAAc,EAAE,kBAAkB;IAClCC,aAAa,EAAG,UAASF,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEG,cAAe;EAC7D,CAAC;AACH,CAAC;AAAC,KAPWJ,UAAU;AASvB,OAAO,SAASK,4BAA4B,GAAG;EAC7CR,KAAK,CAACS,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC5BD,QAAQ,IAAKA,QAAQ,EACrBE,KAAK,IAAK;IAAA;IACT,MAAMC,WAAW,GAAGX,qBAAqB,CAACG,cAAc,EAAE;IAC1D,MAAMS,UAAU,GAAGD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEN,cAAc;IAC9C,MAAMQ,MAAM,GAAGH,KAAK,aAALA,KAAK,0CAALA,KAAK,CAAEF,QAAQ,oDAAf,gBAAiBK,MAAM;IAEtC,IAAID,UAAU,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAACE,QAAQ,CAACD,MAAM,CAAC,EAAE;MAC7Cb,qBAAqB,CAACe,gBAAgB,EAAE;MACxChB,cAAc,CAACiB,IAAI,CAAC,QAAQ,CAAC;IAC/B;IACA,OAAOC,OAAO,CAACC,MAAM,CAACR,KAAK,CAAC;EAC9B,CAAC,CACF;AACH;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}